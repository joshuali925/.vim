#!/usr/bin/env bash
if [ ! -f "$HOME/.config/lf/lfrc" ]; then
  mkdir -p ~/.local/share/lf ~/.config/lf
  ln -sv ~/.vim/config/lfrc ~/.config/lf/lfrc
fi

source ~/.vim/bin/_install_from_github.sh
start=$SECONDS
install-from-github lf gokcehan/lf linux-amd64 linux-arm64 darwin-amd64 '' '' "$@" || {
  if [ $((($SECONDS - $start))) -lt 1 ]; then
    if [ ! -x "$HOME/.vim/tmp/fff" ]; then
      curl -sL -o "$HOME/.vim/tmp/fff" https://raw.githubusercontent.com/dylanaraps/fff/HEAD/fff
      chmod +x "$HOME/.vim/tmp/fff"
    fi
    FFF_HIDDEN=1 FFF_CD_FILE=~/.vim/tmp/lf_dir FFF_KEY_MOVE=d FFF_KEY_TRASH=x FFF_KEY_RENAME=R FFF_KEY_REFRESH=r exec "$HOME/.vim/tmp/fff" "$@"
  fi
}
